<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>카드 타자 속도 게임 — 안정판</title>
<style>
  :root{
    --card-bg:#FEE500;
    --page:#0b1220;
    --text:#222;
  }
  *{box-sizing:border-box}
  body{
    margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
    background:var(--page);color:var(--text);
    font-family:Inter,system-ui,-apple-system,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",sans-serif;
    padding:28px;
  }
  .wrap{width:min(960px,96vw)}
  .card-frame{position:relative;width:720px;max-width:100%;height:430px;border-radius:20px;background:var(--card-bg);box-shadow:0 18px 60px rgba(0,0,0,.45);padding:30px;display:flex;flex-direction:column;justify-content:space-between;margin:0 auto}
  .top{display:flex;justify-content:space-between;align-items:center}
  .chip{width:56px;height:40px;border-radius:6px;background:linear-gradient(180deg,#f6e6b3,#d4b86a)}
  .brand{font-weight:800;font-size:20px}
  .label{font-size:13px;color:#333}
  .target-number{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Roboto Mono",monospace;font-size:32px;letter-spacing:3px}
  .row{display:flex;gap:24px;align-items:center}
  .expiry,.cvc{font-family:ui-monospace,monospace;font-size:20px}
  .live-ticker{position:absolute;top:14px;right:14px;background:rgba(0,0,0,.75);color:#fff;border-radius:10px;padding:6px 10px;font-family:ui-monospace,monospace;font-size:14px;letter-spacing:.3px;box-shadow:0 4px 14px rgba(0,0,0,.25);display:none}
  .live-ticker.show{display:block}
  .countdown{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:rgba(255,255,255,.45);backdrop-filter:blur(3px)}
  .countdown.show{display:flex}
  .countdown .num{font-size:90px;font-weight:800;color:#222;text-shadow:0 8px 24px rgba(0,0,0,.15)}
  .controls{margin:18px auto 0;display:flex;gap:10px;justify-content:center}
  button{border:none;border-radius:10px;padding:10px 18px;cursor:pointer;font-weight:700}
  #startBtn{background:#222;color:#fff}
  #abortBtn{background:transparent;color:#222;border:1px solid #222;display:none}
  #restartBtn{background:#222;color:#fff;display:none}
  .timer{text-align:center;font-family:ui-monospace,monospace;font-size:20px;margin-top:12px;color:#000}
  .inputs{margin:18px auto 0;width:720px;max-width:100%;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
  .inputs .row{display:flex;gap:12px;flex-wrap:wrap}
  .inputs label{display:block;font-size:12px;color:#b7c3e0;margin-bottom:6px}
  .inputs input{width:100%;padding:12px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:#fff;color:#111;font-size:16px;font-family:ui-monospace,monospace}
  .inputs .col{flex:1 1 260px}
  .inputs .col.cvc{max-width:160px}
  .status{margin:10px auto 0;width:720px;max-width:100%;display:flex;justify-content:space-between;align-items:center;color:#9fb0d2;font-size:13px}
  .popup{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}
  .popup.show{display:flex}
  .popup .box{background:#fff;border-radius:14px;padding:30px 40px;text-align:center;box-shadow:0 10px 40px rgba(0,0,0,.4)}
  .popup .box h2{margin:0 0 10px;font-size:28px}
  .popup .box button{background:#222;color:#fff;margin-top:20px}
</style>
</head>
<body>
  <div class='wrap'>
    <div class='card-frame' aria-label='연습용 카드'>
      <div class='countdown' id='countdown'></div>
      <div class='live-ticker' id='liveTicker'>0.000 s</div>
      <div class='top'><div class='chip'></div><div class='brand'>Quick Test</div></div>
      <div><div class='label'>표시된 카드번호</div><div class='target-number' id='targetNumber'>---- ---- ---- ----</div>
      <div class='row' style='margin-top:14px'><div><div class='label'>만료일 (MM/YY)</div><div class='expiry' id='targetExpiry'>--/--</div></div>
      <div><div class='label'>CVC</div><div class='cvc' id='targetCvc'>---</div></div></div></div>
      <div><div class='controls'><button id='startBtn'>시작</button><button id='abortBtn'>초기화</button><button id='restartBtn'>재시작</button></div><div class='timer' id='timer'>0.000 s</div></div>
    </div>
    <div class='inputs'><div class='row'><div class='col' style='flex-basis:100%'><label for='inputNumber'>카드번호</label><input id='inputNumber' type='tel' inputmode='numeric' placeholder='예: 1234 5678 9012 3456' maxlength='23' disabled></div>
    <div class='col'><label for='inputExpiry'>만료일 (MM/YY)</label><input id='inputExpiry' type='text' inputmode='numeric' placeholder='MM/YY' maxlength='5' disabled></div>
    <div class='col cvc'><label for='inputCvc'>CVC</label><input id='inputCvc' type='tel' inputmode='numeric' placeholder='123' maxlength='3' disabled></div></div></div>
    <div class='status'><div>오류 횟수: <span id='errors'>0</span></div><div>붙여넣기 금지 · 정확히 입력하면 자동 종료</div></div>
    <div class='popup' id='failPopup'><div class='box'><h2 style='color:#c00'>실패!</h2><p>입력 내용이 일치하지 않습니다.</p><button id='closeFail'>닫기</button></div></div>
    <div class='popup' id='successPopup'><div class='box'><h2 style='color:#0a0'>성공!</h2><p>걸린 시간: <span id='successTime'>0.000 s</span></p><button id='closeSuccess'>재시작</button></div></div>
  </div>
<script>
'use strict';
const randInt=(min,max)=>Math.floor(Math.random()*(max-min+1))+min;
const pad2=n=>n.toString().padStart(2,'0');
const onlyDigits=s=>s.replace(/\D/g,'');
const groupBy4=s=>(s.replace(/\s+/g,'').match(/.{1,4}/g)||[]).join(' ');
const makeNumber=len=>Array.from({length:len},()=>randInt(0,9)).join('');
const makeExpiry=()=>{const d=new Date();d.setMonth(d.getMonth()+randInt(1,60));return pad2(d.getMonth()+1)+'/'+pad2(d.getFullYear()%100);};
const makeCvc=()=>String(randInt(0,999)).padStart(3,'0');
const startBtn=document.getElementById('startBtn'),abortBtn=document.getElementById('abortBtn'),restartBtn=document.getElementById('restartBtn');
const countdownEl=document.getElementById('countdown'),liveTicker=document.getElementById('liveTicker');
const targetNumberEl=document.getElementById('targetNumber'),targetExpiryEl=document.getElementById('targetExpiry'),targetCvcEl=document.getElementById('targetCvc');
const inputNumber=document.getElementById('inputNumber'),inputExpiry=document.getElementById('inputExpiry'),inputCvc=document.getElementById('inputCvc');
const timerEl=document.getElementById('timer'),errorsEl=document.getElementById('errors');
const failPopup=document.getElementById('failPopup'),closeFail=document.getElementById('closeFail');
const successPopup=document.getElementById('successPopup'),closeSuccess=document.getElementById('closeSuccess'),successTimeEl=document.getElementById('successTime');
let targetNumber='',targetExpiry='',targetCvc='',running=false,startTime=0,rafId=null,errorCount=0,countdownIds=[];
function updateTimer(){if(!running)return;const s=(performance.now()-startTime)/1000;const txt=s.toFixed(3)+' s';timerEl.textContent=txt;liveTicker.textContent=txt;rafId=requestAnimationFrame(updateTimer)}
function showCountdown(done){countdownIds.forEach(clearTimeout);countdownIds=[];countdownEl.classList.add('show');const steps=['3','2','1','시작!'];steps.forEach((t,i)=>{const id=setTimeout(()=>{countdownEl.innerHTML='<div class="num">'+t+'</div>';if(i===steps.length-1){const hid=setTimeout(()=>{countdownEl.classList.remove('show');countdownEl.innerHTML='';done&&done();},550);countdownIds.push(hid)}},i*700);countdownIds.push(id)})}
function startGame(){targetNumber=makeNumber(16);targetExpiry=makeExpiry();targetCvc=makeCvc();targetNumberEl.textContent=groupBy4(targetNumber);targetExpiryEl.textContent=targetExpiry;targetCvcEl.textContent=targetCvc;inputNumber.value=inputExpiry.value=inputCvc.value='';inputNumber.disabled=inputExpiry.disabled=inputCvc.disabled=true;errorCount=0;errorsEl.textContent='0';startBtn.disabled=true;abortBtn.style.display='inline-block';restartBtn.style.display='none';liveTicker.textContent='0.000 s';showCountdown(()=>{inputNumber.disabled=false;inputExpiry.disabled=false;inputCvc.disabled=false;inputNumber.focus();startTime=performance.now();running=true;liveTicker.classList.add('show');updateTimer();});}
function finishGame(success){if(!running)return;running=false;if(rafId)cancelAnimationFrame(rafId);abortBtn.style.display='none';restartBtn.style.display='inline-block';const s=(performance.now()-startTime)/1000;const txt=s.toFixed(3)+' s';timerEl.textContent=txt;liveTicker.textContent=txt;liveTicker.classList.remove('show');if(success){successTimeEl.textContent=txt;successPopup.classList.add('show')}else{failPopup.classList.add('show')}}
function resetAll(){if(rafId)cancelAnimationFrame(rafId);countdownIds.forEach(clearTimeout);countdownEl.classList.remove('show');countdownEl.innerHTML='';targetNumber=targetExpiry=targetCvc='';targetNumberEl.textContent='---- ---- ---- ----';targetExpiryEl.textContent='--/--';targetCvcEl.textContent='---';inputNumber.value=inputExpiry.value=inputCvc.value='';inputNumber.disabled=inputExpiry.disabled=inputCvc.disabled=true;running=false;errorCount=0;errorsEl.textContent='0';timerEl.textContent='0.000 s';liveTicker.textContent='0.000 s';liveTicker.classList.remove('show');startBtn.disabled=false;abortBtn.style.display='none';restartBtn.style.display='none';failPopup.classList.remove('show');successPopup.classList.remove('show');}
function checkAll(){if(!running)return;const num=onlyDigits(inputNumber.value),exp=onlyDigits(inputExpiry.value),cvc=onlyDigits(inputCvc.value);let errs=0;for(let i=0;i<num.length;i++){if(num[i]!==targetNumber[i])errs++}const te=targetExpiry.replace(/\D/g,'');for(let i=0;i<exp.length;i++){if(exp[i]!==te[i])errs++}for(let i=0;i<cvc.length;i++){if(cvc[i]!==targetCvc[i])errs++}errorCount=errs;errorsEl.textContent=String(errorCount);if(num.length===targetNumber.length&&exp.length===te.length&&cvc.length===targetCvc.length){finishGame(errs===0)}}
function blockPasteDrop(el){el.addEventListener('paste',e=>e.preventDefault());el.addEventListener('drop',e=>e.preventDefault())}
[inputNumber,inputExpiry,inputCvc].forEach(blockPasteDrop);
inputNumber.addEventListener('input',()=>{if(!running)return;const raw=onlyDigits(inputNumber.value).slice(0,16);inputNumber.value=groupBy4(raw);checkAll()});
inputExpiry.addEventListener('input',()=>{if(!running)return;const raw=onlyDigits(inputExpiry.value).slice(0,4);inputExpiry.value=(raw.length>=3)?(raw.slice(0,2)+'/'+raw.slice(2)):raw;checkAll()});
inputCvc.addEventListener('input',()=>{if(!running)return;inputCvc.value=onlyDigits(inputCvc.value).slice(0,3);checkAll()});
startBtn.addEventListener('click',startGame);abortBtn.addEventListener('click',resetAll);restartBtn.addEventListener('click',resetAll);closeFail.addEventListener('click',resetAll);closeSuccess.addEventListener('click',resetAll);
resetAll();
</script>
</body>
</html>